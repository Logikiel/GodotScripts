extends Sprite

const Bullet := preload("practice test.tscn")

export var fire_rate := 500


func _process(delta: float) -> void:
	look_at(get_global_mouse_position())
	rotate(PI/2)
	var direction := Vector2.UP.rotated(rotation)

	if Input.is_action_pressed("ui_leftclick"):
		var bullets_to_spawn := round(fire_rate * delta)
		for i in bullets_to_spawn:
			var bullet = Bullet.instance()
			bullet.fire(global_position, direction.rotated(rand_range(-PI/4,PI/4)))
			add_child(bullet)
